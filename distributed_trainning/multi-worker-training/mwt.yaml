apiVersion: kubeflow.org/v1
kind: TFJob
metadata:
  name: multi-worker
  namespace: distributed-training
spec:
  tfReplicaSpecs:
    Worker:
      replicas: 2
      restartPolicy: Never
      template:
        spec:
          containers:
            - name: tensorflow
              image: fullstackdatascience/distributed_training:0.0.11
              volumeMounts:
                - mountPath: /train
                  name: training
          volumes:
            - name: training
              persistentVolumeClaim:
                claimName: mwt-volume
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mwt-volume
  namespace: distributed-training
spec:
  accessModes:
  - ReadWriteMany
  resources:
    requests:
      storage: 10Gi